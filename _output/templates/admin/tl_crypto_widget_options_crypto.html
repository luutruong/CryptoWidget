<xf:js prod="xf/token_input-compiled.js"
       dev="vendor/select2/select2.full.min.js, xf/token_input.js" />
<xf:js src="Truonglv/CryptoWidget/search.js"
       addon="Truonglv/CryptoWidget"
       min="1" />

<xf:css src="public:select2.less" />

<xf:js>
    jQuery.extend(XF.phrases, {
        s2_error_loading: "{{ phrase('s2_error_loading')|escape('js') }}",
        s2_input_too_long: "{{ phrase('s2_input_too_long')|escape('js') }}",
        s2_input_too_short: "{{ phrase('s2_input_too_short')|escape('js') }}",
        s2_loading_more: "{{ phrase('s2_loading_more')|escape('js') }}",
        s2_maximum_selected: "{{ phrase('s2_maximum_selected')|escape('js') }}",
        s2_no_results: "{{ phrase('s2_no_results')|escape('js') }}",
        s2_searching: "{{ phrase('s2_searching')|escape('js') }}"
    });
</xf:js>

<xf:set var="$iconTemplate">
    <xf:macro name="icon_url" arg-name="{name}" arg-inputName="{input}" arg-id="{id}" />
</xf:set>

<xf:textboxrow name="options[crypto_ids]" value=""
               data-allow-cryptos="{$cryptoList|json}"
               data-value="{$options.crypto_ids|json}"
               data-xf-init="crypto-widget-search"
               data-icon-template="{$iconTemplate}"
               data-icon-selector="#crypto-widget--iconList"
               label="{{ phrase('tl_crypto_widget.show_cryptos') }}" />

<xf:formrow label="{{ phrase('tl_crypto_widget.crypto_logo') }}">
    <ol class="listPlain" id="crypto-widget--iconList">
        <xf:foreach loop="$activeCryptos" value="$crypto">
            <xf:macro name="icon_url"
                      arg-name="{$crypto.name}"
                      arg-id="{$crypto.id}"
                      arg-inputName="options[icons][{$crypto.id}]"
                      arg-value="{$options.icons.{$crypto.id}}" />
        </xf:foreach>
    </ol>
</xf:formrow>

<xf:macro name="icon_url" arg-name="!" arg-id="!" arg-inputName="!" arg-value="{{ null }}">
    <li style="margin-bottom: 6px" data-id="{$id}">
        <div class="inputGroup">
            <span class="input" style="max-width: 150px">{$name}</span>

            <span class="inputGroup-splitter"></span>

            <xf:textbox name="{$inputName}" value="{$value}"
                        placeholder="{{ phrase('tl_crypto_widget.icon_url') }}" />
        </div>
    </li>
</xf:macro>